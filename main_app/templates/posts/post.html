{% extends 'base.html' %}
{% load static %}
{% block extra_head %}
  <link rel="stylesheet" href="{% static 'css/post.css' %}">
{% endblock %}
{% block content %}

<div class="container">
    <div class="row">
        <div class="col-lg-8">
            <!-- Title -->
            <h1>{{post.title}}</h1> 
            <h3 class="mt-4">{{post.city.name}}</h3>
            <!-- Author -->
            <div class="lead">
                by
                <a href="profile">{{post.user.first_name}} {{post.user.last_name}}</a> in {{post.city.name}}
                <br>
                <div class="post-title-header">
                    <!-- Date/Time -->
                    Posted on {{post.created_at}}
                    </p>
                    <!-- Post Button -->
                    <div class="action-btns">
                        <a href="{% url 'post_edit' post.id%}">
                        <button class="edit-button">
                            <i class="fa fa-pencil" aria-hidden="true"></i>
                        </button>
                        </a>
                        <button class="delete-button">
                            <i class="fa fa-trash-o" aria-hidden="true"></i>
                        </button>
                    </div>
                </div>
                <hr>
            </div>
            <!-- Preview Image -->
            <img class="img-fluid rounded" src="{{ post.img.url }}" alt="">
            <hr>
            <!-- Post Content -->
            <p>{{post.body}}</p>
        </div>
    </div>
</div>


<div class="mask prompt-mask">
  <div class="prompt">
    <h4>Are you sure you want to delete this post?</h4>
    <div class="prompt-buttons">
      <a href="{% url 'post_delete' post.id %}">
        <button class="btn btn-primary">Yes</button>
      </a>     
      <button class="btn btn-info cancel-btn">Cancel</button>
    </div>
  </div>
</div>

<script>
    function findElement(query, isMulti = false) {
        return (!isMulti) ?
                document.querySelector(query) :
                document.querySelectorAll(query);
    }

    if(findElement('.prompt-mask') !== null) {
        findElement('.prompt-mask').addEventListener('click', (e) => {
            if (e.target !== findElement('.prompt-mask')) return;
            findElement('.prompt-mask').classList.remove('show');   
        })
    }
    if(findElement('.delete-button') !== null) {
        findElement('.delete-button').addEventListener('click', () =>{
            findElement('.prompt-mask').classList.add('show');   
        })
    }
    if(findElement('.cancel-btn') !== null) {
        findElement('.cancel-btn').addEventListener('click', (e) => {
            findElement('.prompt-mask').classList.remove('show');   
        })
    }
</script>

{% endblock %}